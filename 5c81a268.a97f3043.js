(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{114:function(e,n,t){"use strict";t.d(n,"a",(function(){return o})),t.d(n,"b",(function(){return u}));var a=t(0),l=t.n(a),i=l.a.createContext({}),r=function(e){var n=l.a.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):Object.assign({},n,e)),t},o=function(e){var n=r(e.components);return l.a.createElement(i.Provider,{value:n},e.children)};var d="mdxType",c={inlineCode:"code",wrapper:function(e){var n=e.children;return l.a.createElement(l.a.Fragment,{},n)}},s=Object(a.forwardRef)((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,o=e.parentName,d=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&-1===n.indexOf(a)&&(t[a]=e[a]);return t}(e,["components","mdxType","originalType","parentName"]),s=r(t),u=a,b=s[o+"."+u]||s[u]||c[u]||i;return t?l.a.createElement(b,Object.assign({},{ref:n},d,{components:t})):l.a.createElement(b,Object.assign({},{ref:n},d))}));function u(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,r=new Array(i);r[0]=s;var o={};for(var c in n)hasOwnProperty.call(n,c)&&(o[c]=n[c]);o.originalType=e,o[d]="string"==typeof e?e:a,r[1]=o;for(var u=2;u<i;u++)r[u]=t[u];return l.a.createElement.apply(null,r)}return l.a.createElement.apply(null,t)}s.displayName="MDXCreateElement"},564:function(e,n,t){"use strict";var a=t(0),l=t.n(a);var i=t(8),r=t.n(i);const o=({of:e})=>l.a.createElement("div",{className:"callout is-warning"},"Work in Progress."," ",l.a.createElement("strong",null,e)," ","is not implemented yet.");o.propTypes={of:r.a.string},o.defaultProps={of:"This"};const d=({of:e})=>l.a.createElement("div",{className:"callout is-warning"},"Work in Progress."," ",l.a.createElement("strong",null,"@formiz/",e)," ","is not published on NPM yet.");d.propTypes={of:r.a.string},d.defaultProps={of:"core"}},98:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return r})),t.d(n,"metadata",(function(){return o})),t.d(n,"rightToc",(function(){return d})),t.d(n,"default",(function(){return u}));var a=t(1),l=t(6),i=(t(0),t(114)),r=(t(564),{id:"use-field",title:"useField() hook"}),o={id:"core/use-field",title:"useField() hook",description:"import { NotImplemented } from '../../src/messages'",source:"@site/docs/core/useField-hook.mdx",permalink:"/docs/core/use-field",sidebar:"docs",previous:{title:"useForm() hook",permalink:"/docs/core/use-form"},next:{title:"Validation Rules",permalink:"/docs/validations/rules"}},d=[{value:"Concept",id:"concept",children:[]},{value:"Hook values",id:"hook-values",children:[{value:"<code>value</code>",id:"value",children:[]},{value:"<code>valueDebounced</code>",id:"valuedebounced",children:[]},{value:"<code>setValue()</code>",id:"setvalue",children:[]},{value:"<code>id</code>",id:"id",children:[]},{value:"<code>isValid</code>",id:"isvalid",children:[]},{value:"<code>isPristine</code>",id:"ispristine",children:[]},{value:"<code>isSubmitted</code>",id:"issubmitted",children:[]},{value:"<code>errorMessage</code>",id:"errormessage",children:[]},{value:"<code>errorMessages</code>",id:"errormessages",children:[]},{value:"<code>resetKey</code>",id:"resetkey",children:[]}]},{value:"Field props",id:"field-props",children:[{value:"<code>name</code> *",id:"name-",children:[]},{value:"<code>debounce</code>",id:"debounce",children:[]},{value:"<code>defaultValue</code>",id:"defaultvalue",children:[]},{value:"<code>keepValue</code>",id:"keepvalue",children:[]},{value:"<code>formatValue(fieldValue)</code>",id:"formatvaluefieldvalue",children:[]},{value:"<code>onChange(fieldValue)</code>",id:"onchangefieldvalue",children:[]},{value:"<code>required</code>",id:"required",children:[]},{value:"<code>validations</code>",id:"validations",children:[]}]},{value:"PropTypes validations",id:"proptypes-validations",children:[]}],c={rightToc:d},s="wrapper";function u(e){var n=e.components,t=Object(l.a)(e,["components"]);return Object(i.b)(s,Object(a.a)({},c,t,{components:n,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"concept"},"Concept"),Object(i.b)("p",null,"When using the ",Object(i.b)("inlineCode",{parentName:"p"},"useField")," hook, you need to pass your component ",Object(i.b)("inlineCode",{parentName:"p"},"props")," to the hook."),Object(i.b)("p",null,"Then the hook gives you access to the field state."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import React from 'react'\nimport { useField } from '@formiz/core'\n\nconst MyField = (props) => {\n  const {\n    value,\n    setValue,\n    isValid,\n    errorMessage,\n  } = useField(props)\n\n  return (\n    ...\n  )\n}\n")),Object(i.b)("hr",null),Object(i.b)("h2",{id:"hook-values"},"Hook values"),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"useField")," return an object with the following properties:"),Object(i.b)("h3",{id:"value"},Object(i.b)("inlineCode",{parentName:"h3"},"value")),Object(i.b)("p",null,"Get the current value of the field."),Object(i.b)("h3",{id:"valuedebounced"},Object(i.b)("inlineCode",{parentName:"h3"},"valueDebounced")),Object(i.b)("p",null,"Get the current value of the field, but sync with the debouncing.\nIt can be useful to determinate when to show error messages."),Object(i.b)("h3",{id:"setvalue"},Object(i.b)("inlineCode",{parentName:"h3"},"setValue()")),Object(i.b)("p",null,"Set the value of the field."),Object(i.b)("h3",{id:"id"},Object(i.b)("inlineCode",{parentName:"h3"},"id")),Object(i.b)("p",null,"Return a unique id."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"<label htmlFor={id}>...</label>\n<input id={id} />\n")),Object(i.b)("h3",{id:"isvalid"},Object(i.b)("inlineCode",{parentName:"h3"},"isValid")),Object(i.b)("p",null,"Returns ",Object(i.b)("inlineCode",{parentName:"p"},"true")," if the field is valid."),Object(i.b)("h3",{id:"ispristine"},Object(i.b)("inlineCode",{parentName:"h3"},"isPristine")),Object(i.b)("p",null,"Returns ",Object(i.b)("inlineCode",{parentName:"p"},"true")," if the field has not been changed."),Object(i.b)("h3",{id:"issubmitted"},Object(i.b)("inlineCode",{parentName:"h3"},"isSubmitted")),Object(i.b)("p",null,"Returns ",Object(i.b)("inlineCode",{parentName:"p"},"true")," either if the current step or the form is submitted."),Object(i.b)("h3",{id:"errormessage"},Object(i.b)("inlineCode",{parentName:"h3"},"errorMessage")),Object(i.b)("p",null,"Returns the first error message."),Object(i.b)("h3",{id:"errormessages"},Object(i.b)("inlineCode",{parentName:"h3"},"errorMessages")),Object(i.b)("p",null,"Returns all error messages."),Object(i.b)("h3",{id:"resetkey"},Object(i.b)("inlineCode",{parentName:"h3"},"resetKey")),Object(i.b)("p",null,"Allows you to put a key on elements that you want to be reinitialize when the from is reset.",Object(i.b)("br",null),"\nCan be useful for element like ",Object(i.b)("inlineCode",{parentName:"p"},"<input>")," or ",Object(i.b)("inlineCode",{parentName:"p"},"<select>"),"."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"<input key={resetKey} />\n")),Object(i.b)("hr",null),Object(i.b)("h2",{id:"field-props"},"Field props"),Object(i.b)("p",null,"When a component is created with the ",Object(i.b)("inlineCode",{parentName:"p"},"useField()")," hook,\nyou can pass the following props to the component."),Object(i.b)("h3",{id:"name-"},Object(i.b)("inlineCode",{parentName:"h3"},"name")," *"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Required")),Object(i.b)("p",null,"The name is required to register the field in the form."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),'<Field name="myFieldName" />\n')),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Nested objects")),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"name")," props can use lodash-like dot paths to reference nested values."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"<Field name=\"fieldA\" />\n<Field name=\"fieldB\" />\n<Field name=\"myGroup.fieldA\" />\n<Field name=\"myGroup.fieldB\" />\n\n/* Form values\n{\n  fieldA: 'value',\n  fieldB: 'value',\n  myGroup: {\n    fieldA: 'value',\n    fieldB: 'value',\n  },\n}\n*/\n")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Arrays")),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"name")," props allow also arrays and arrays of objects out of the box.\nUsing lodash-like bracket syntax for ",Object(i.b)("inlineCode",{parentName:"p"},"name")," allow you to handle fields in a list."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"<Field name=\"myArray[0]\" />\n<Field name=\"myArray[1]\" />\n<Field name=\"myArrayOfObjects[0].fieldA\" />\n<Field name=\"myArrayOfObjects[0].fieldB\" />\n<Field name=\"myArrayOfObjects[1].fieldA\" />\n<Field name=\"myArrayOfObjects[1].fieldB\" />\n\n/* Form values\n{\n  myArray: ['value', 'value'],\n  myArrayOfObjects: [\n    { fieldA: 'value', fieldB: 'value' },\n    { fieldA: 'value', fieldB: 'value' },\n  ],\n}\n*/\n")),Object(i.b)("h3",{id:"debounce"},Object(i.b)("inlineCode",{parentName:"h3"},"debounce")),Object(i.b)("p",null,"Number of milliseconds for debouncing validations. (default is ",Object(i.b)("inlineCode",{parentName:"p"},"100"),")."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),'<Field name="myFieldName" debounce={200} />\n')),Object(i.b)("h3",{id:"defaultvalue"},Object(i.b)("inlineCode",{parentName:"h3"},"defaultValue")),Object(i.b)("p",null,"Pass an initial value to the field."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),'<Field name="myFieldName" defaultValue="My initial value" />\n')),Object(i.b)("h3",{id:"keepvalue"},Object(i.b)("inlineCode",{parentName:"h3"},"keepValue")),Object(i.b)("p",null,"Set to ",Object(i.b)("inlineCode",{parentName:"p"},"true")," to keep the value when the field is unmounted from the DOM. (default is ",Object(i.b)("inlineCode",{parentName:"p"},"false"),")."),Object(i.b)("h3",{id:"formatvaluefieldvalue"},Object(i.b)("inlineCode",{parentName:"h3"},"formatValue(fieldValue)")),Object(i.b)("p",null,"Format the value before saving it into the internal state."),Object(i.b)("h3",{id:"onchangefieldvalue"},Object(i.b)("inlineCode",{parentName:"h3"},"onChange(fieldValue)")),Object(i.b)("p",null,"Triggered everytime that setValue() is called inside the field."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),'<Field name="myFieldName" onChange={val => console.log(val)} />\n')),Object(i.b)("h3",{id:"required"},Object(i.b)("inlineCode",{parentName:"h3"},"required")),Object(i.b)("p",null,"Shortcut for isRequired() validation"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),'<Field name="myFieldName" required />\n<Field name="myFieldName" required="Field is required" />\n')),Object(i.b)("h3",{id:"validations"},Object(i.b)("inlineCode",{parentName:"h3"},"validations")),Object(i.b)("p",null,"An array of object with:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"rule(fieldValue, formValues)"),": Built in validation rule or custom validation function (must return ",Object(i.b)("inlineCode",{parentName:"li"},"true")," if the rule is valid)."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"deps"),": Array of external values used in the rule function (like array of dependencies in useEffect)."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"message"),": The message if the rule is invalid.")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"<Field\n  name=\"myFieldName\"\n  validations={[\n    {\n      rule: isRequired(),\n      message: 'Field is required',\n    },\n    {\n      rule: isNotEmptyString(),\n      message: 'Field can\\'t be empty',\n    },\n    {\n      rule: (value) => value.toLowerCase() !== 'john',\n      message: 'Field can\\'t be john',\n    },\n    {\n      rule: (value) => value !== externalValue,\n      deps: [externalValue],\n      message: 'Field can\\'t be the same as external value',\n    },\n  ]}\n/>\n")),Object(i.b)("hr",null),Object(i.b)("h2",{id:"proptypes-validations"},"PropTypes validations"),Object(i.b)("p",null,"If you using ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://www.npmjs.com/package/prop-types"}),"prop-types")," to document props in your project,\nyou can get ",Object(i.b)("inlineCode",{parentName:"p"},"fieldPropTypes")," and ",Object(i.b)("inlineCode",{parentName:"p"},"fieldDefaultProps")," from ",Object(i.b)("inlineCode",{parentName:"p"},"@formiz/core")," to pass to your custom fields for PropTypes validations."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"// MyField.js\nimport React from 'react'\nimport { useField, fieldPropTypes, fieldDefaultProps } from '@formiz/core'\n\nconst MyField = (props) => {\n  // ...\n}\n\nMyField.propTypes = {\n  ...fieldPropTypes,\n  // Your custom props\n}\n\nMyField.defaultProps = {\n  ...fieldDefaultProps,\n  // Your custom props\n}\n")))}u.isMDXComponent=!0}}]);