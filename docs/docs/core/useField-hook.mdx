---
id: use-field
title: useField() hook
---

import { NotImplemented } from '../../src/messages'

## Concept

When using the `useField` hook, you need to pass your component `props` to the hook.

Then the hook gives you access to the field state.

```jsx
import React from 'react'
import { useField } from '@formiz/core'

const MyField = (props) => {
  const {
    value,
    setValue,
    isValid,
    errorMessage,
  } = useField(props)

  return (
    ...
  )
}
```

---

## Hook values

The `useField` return an object with the following properties:

### `value`

> Get the current value of the field.

### `setValue()`

> Set the value of the field.

### `isValid`

> Returns `true` if the field is valid.

### `isPristine`

> Returns `true` if the field has not been changed.

### `isSubmitted`

> Returns `true` either if the current step or the form is submitted.

### `errorMessage`

> Returns the first error message.

### `errorMessages`

> Returns all error messages.

### `resetKey`

> Allows you to put a key on elements that you want to be reinitialize when the from is reset.<br />
> Can be useful for element like `<input>` or `<select>`.

```jsx
<input key={resetKey} />
```

---

## Field props

When a component is created with the `useField()` hook,
you can pass the following props to the component.

### `name` *
**Required**

> The name is required to register the field in the form.

```jsx
<Field name="myFieldName" />
```

**Nested values**

The `name` props can use lodash-like dot paths to reference nested values.

```jsx
<Field name="fieldA" />
<Field name="fieldB" />
<Field name="myGroup.fieldA" />
<Field name="myGroup.fieldB" />

/* Form values
{
  fieldA: 'value',
  fieldB: 'value',
  group: {
    fieldA: 'value',
    fieldB: 'value',
  },
}
*/
```

### `defaultValue`

> Pass an initial value to the field.

### `id`

> Return a unique id

```jsx
<Field name="myFieldName" />
```

```jsx
<Field name="myFieldName" defaultValue="My initial value" />
```

### `isRequired`

> Shortcut for isRequired() validation

```jsx
<Field name="myFieldName" isRequired />
<Field name="myFieldName" isRequired="Field is required" />
```

### `keepValue`

> Set to `true` to keep the value when the field is unmounted from the DOM. (default is `false`).

### `onChange(fieldValue)`

> Triggered everytime that setValue() is called inside the field.

### `validations`

> An array of object with:
> - `rule(fieldValue, formValues)`: Built in validation rule or custom validation function (must return `true` if the rule is valid).
> - `message`: The message if the rule is invalid.

```jsx
<Field
  name="myFieldName"
  validations={[
    {
      rule: isRequired(),
      message: 'Field is required',
    },
    {
      rule: isNotEmptyString(),
      message: 'Field can\'t be empty',
    },
    {
      rule: (value, values) => value.toLowerCase() !== 'john',
      message: 'Field can\'t be john',
    },
  ]}
/>
```

---

## PropTypes validations

If you using [prop-types](https://www.npmjs.com/package/prop-types) to document props in your project,
you can get `fieldPropTypes` and `fieldDefaultProps` from `@formiz/core` to pass to your custom fields for PropTypes validations.

```jsx
// MyField.js
import React from 'react'
import { useField, fieldPropTypes, fieldDefaultProps } from '@formiz/core'

const MyField = (props) => {
  // ...
}

MyField.propTypes = {
  ...fieldPropTypes,
  // Your custom props
}

MyField.defaultProps = {
  ...fieldDefaultProps,
  // Your custom props
}
```
