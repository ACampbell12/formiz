---
id: use-field
title: useField() hook
---

import { NotImplemented } from '../../src/messages'

## Concept

When using the `useField` hook, you need to pass your component `props` to the hook.

Then the hook give you access to the field state.

```jsx
import React from 'react'
import { useField } from '@formiz/core'

const MyField = (props) => {
  const {
    value,
    setValue,
    isValid,
    errorMessage,
  } = useField(props)

  return (
    ...
  )
}
```

You can also be more verbose and only pass the 6 required props to the hook (`name`, `defaultValue`, `isRequired`, `validations`, `keepValue` and `onChange`).

```jsx
useField({ name, defaultValue, isRequired, validations, keepValue, onChange })
```

---

## Hook values

The `useField` return an object with the following properties:

#### `value`

> Get the current value of the field.

#### `setValue()`

> Set the value of the field.

#### `isValid`

> Returns `true` if the field is valid.

#### `errorMessage`

> Return the first error message.

#### `errorMessages`

<NotImplemented of="errorMessages" />

---

## Field props

When a component is created with the `useField()` hook,
you can pass the following props to the component.

#### `name` [required]

> The name is required to register the field in the form.

```jsx
<Field name="myFieldName" />
```

#### `defaultValue`

> Pass an initial value to the field.

```jsx
<Field name="myFieldName" defaultValue="My initial value" />
```

#### `isRequired`

> Shortcut for isRequired() validation

```jsx
<Field name="myFieldName" isRequired />
<Field name="myFieldName" isRequired="Field is required" />
```

#### `validations`

> An array of object with:
> - `rule(fieldValue, formValues)`: Built in validation rule or custom validation function (must return `true` if the rule is valid).
> - `message`: The message if the rule is invalid.

```jsx
<Field
  name="myFieldName"
  validations={[
    {
      rule: isRequired(),
      message: 'Field is required',
    },
    {
      rule: isNotEmptyString(),
      message: 'Field can\'t be empty',
    },
    {
      rule: (value, values) => value.toLowerCase() !== 'john',
      message: 'Field can\'t be john',
    },
  ]}
/>
```

#### `keepValue`

> Set to `true` to keep the value when the field is unmounted from the DOM. (default is `false`).

#### `onChange(fieldValue, formValues)`

<NotImplemented of="onChange(fieldValue, formValues)" />


---

## Example

#### Create your custom field

```jsx
// MyField.js
import React from 'react'
import { useField } from '@formiz/core'

const MyField = (props) => {
  const { value, setValue, errorMessage, isValid } = useField(props)
  const { customProperty }Â = props

  return (
    <div>
      <input type="text" defaultValue={value} onChange={(e) => setValue(e.target.value)} />
      <strong>{ customProperty }</strong>
      {!isValid && (
        <p>{ errorMessage }</p>
      )}
    </div>
  )
}
```

#### Use your custom field

```jsx
import React from 'react'
import { Formiz } from '@formiz/core'
import { MyField } from './MyField'

export const MyForm = () => {
  const submitForm = (values) => {
    console.log(values) // { myCustomField: 'value' }
  }

  return (
    <Formiz onSubmit={submitForm} >
      <MyField
        name="myCustomField"
        customProperty="Custom Field"
        isRequired="Custom Field is required"
      />
      <button type="submit">
        Submit
      </button>
    </Formiz>
  )
}
```